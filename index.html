<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RiskMap Pro 2.0 ‚Ä¢ IA Integrada</title>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header>
        <div class="header-content">
            <div class="brand">
                <i class="ph ph-shield-check"></i>
                <div>
                    <h1>RiskMap Pro</h1>
                    [cite_start]<small>IA & NR-5 [cite: 101]</small>
                </div>
            </div>
            <div class="xp-container">
                <i class="ph ph-trophy"></i> <span id="xpDisplay">0 XP</span>
            </div>
        </div>
        
        <nav id="menu">
            <button onclick="navTo('inicio')" class="active"><i class="ph ph-house"></i> In√≠cio</button>
            <button onclick="navTo('fundamentos')"><i class="ph ph-book-open"></i> Teoria</button>
            <button onclick="navTo('simulacao-chat')"><i class="ph ph-robot"></i> Consultor IA</button>
            <button onclick="navTo('lab-tour')"><i class="ph ph-flask"></i> Laborat√≥rio</button>
            <button onclick="navTo('quiz-section')"><i class="ph ph-exam"></i> Quiz</button>
        </nav>
    </header>

    <main>
        <section id="inicio" class="active fade-in">
            <div class="hero-card">
                <h2>Sistema de Treinamento em Mapa de Risco</h2>
                <p>
                    Plataforma educacional para elabora√ß√£o de Mapas de Risco baseada na NR-5.
                    [cite_start]Identifique riscos qu√≠micos, f√≠sicos e biol√≥gicos em ambientes laborais reais[cite: 4, 101].
                </p>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="number">IA</span>
                        <span class="label">Consultor em Tempo Real</span>
                    </div>
                    <div class="stat-item">
                        <span class="number">20</span>
                        <span class="label">Quest√µes T√©cnicas</span>
                    </div>
                    <div class="stat-item">
                        <span class="number">5</span>
                        [cite_start]<span class="label">Grupos de Risco [cite: 124]</span>
                    </div>
                </div>
                <button class="btn-primary" onclick="navTo('lab-tour')">Come√ßar Inspe√ß√£o <i class="ph ph-arrow-right"></i></button>
            </div>
        </section>

        <section id="fundamentos" class="fade-in">
            <div class="section-header">
                <h2><i class="ph ph-books"></i> Base Te√≥rica (NR-5)</h2>
            </div>

            <div class="card">
                [cite_start]<h3>Classifica√ß√£o de Riscos e Cores [cite: 124]</h3>
                <div class="risk-table-container" id="riskTable">
                    </div>
            </div>

            <div class="card">
                <h3><i class="ph ph-steps"></i> Hierarquia de Controle</h3>
                <p class="text-sm">Ordem de prioridade para mitigar riscos identificados:</p>
                
                <div class="pyramid-container">
                    <div class="p-level p-1" onclick="showTheoryInfo('eliminar')">1. Elimina√ß√£o (Remover o risco)</div>
                    <div class="p-level p-2" onclick="showTheoryInfo('substituir')">2. Substitui√ß√£o (Trocar produto)</div>
                    <div class="p-level p-3" onclick="showTheoryInfo('engenharia')">3. [cite_start]Engenharia (EPCs/Barreiras) [cite: 18]</div>
                    <div class="p-level p-4" onclick="showTheoryInfo('adm')">4. Administrativo (Treino/Sinaliza√ß√£o)</div>
                    <div class="p-level p-5" onclick="showTheoryInfo('epi')">5. [cite_start]EPI (√öltima defesa) [cite: 29]</div>
                </div>
                <div id="theoryDetail" class="info-box hidden"></div>
            </div>

            <div class="card">
                [cite_start]<h3><i class="ph ph-chart-donut"></i> Intensidade (C√≠rculos) [cite: 224]</h3>
                <p class="text-sm">O tamanho do c√≠rculo no mapa representa a gravidade:</p>
                <div class="intensity-visualizer">
                    <div class="circle-demo small">Pequeno</div>
                    <div class="circle-demo medium">M√©dio</div>
                    <div class="circle-demo large">Grande</div>
                </div>
            </div>
        </section>

        <section id="simulacao-chat" class="fade-in">
            <div class="section-header">
                <h2><i class="ph ph-robot"></i> Consultor de Seguran√ßa (IA)</h2>
                <p>Descreva uma situa√ß√£o do laborat√≥rio e a IA analisar√° o risco segundo a NR-5.</p>
            </div>

            <div class="chat-container">
                <div class="chat-window" id="chatWindow">
                    <div class="msg bot">
                        <div class="avatar">ü§ñ</div>
                        <div class="bubble">
                            Ol√°! Sou seu assistente t√©cnico. Viu algo perigoso no laborat√≥rio? 
                            Me descreva (ex: "fio solto no ch√£o", "cheiro de g√°s") que eu classifico para voc√™.
                        </div>
                    </div>
                </div>
                
                <div class="chat-controls" style="display:flex; gap:10px; align-items:center; background:var(--card); padding:12px; border-top:1px solid var(--border);">
                    <input type="text" id="userInput" placeholder="Digite aqui o problema encontrado..." 
                           style="flex:1; padding:12px; border-radius:8px; border:1px solid var(--border); background:#020617; color:white; outline:none;">
                    <button onclick="falarComIA()" class="btn-primary" style="width:auto; margin:0; height:100%;">
                        <i class="ph ph-paper-plane-right"></i>
                    </button>
                </div>
            </div>
        </section>

        <section id="lab-tour" class="fade-in">
            <div class="section-header">
                <h2><i class="ph ph-binoculars"></i> Inspe√ß√£o do Laborat√≥rio</h2>
                <p>Clique nos equipamentos para ver a an√°lise t√©cnica baseada no estudo de caso.</p>
            </div>
            <div class="lab-grid" id="labGrid">
                </div>
            <div id="labDetail" class="card hidden lab-detail-card"></div>
        </section>

        <section id="quiz-section" class="fade-in">
            <div class="section-header">
                <h2><i class="ph ph-seal-check"></i> Quiz de Certifica√ß√£o</h2>
                <p>Teste seus conhecimentos sobre as normas e o laborat√≥rio.</p>
            </div>

            <div class="quiz-container" id="quizContainer">
                <div class="quiz-header">
                    <span id="qCount">Quest√£o 1/20</span>
                    <span id="qScore">XP Ganho: 0</span>
                </div>
                <div class="question-card">
                    <h3 id="qText">Carregando...</h3>
                    <div class="options-list" id="qOptions"></div>
                </div>
                <div id="qFeedback" class="feedback hidden"></div>
                <button id="nextBtn" class="btn-primary hidden" onclick="nextQuestion()">Pr√≥xima <i class="ph ph-caret-right"></i></button>
            </div>
        </section>

    </main>
    <script src="script.js"></script>
</body>
</html>